<%- layout("/layouts/navbar.ejs") %>

<div class="min-h-screen bg-gradient-to-br from-pink-500 to-pink-800 py-16 px-4">

  <div class="max-w-7xl mx-auto">

    <!-- HEADER -->
    <div class="text-center mb-16">
      <h1 class="text-white text-5xl font-bold mb-4">
        Choose your right plan!
      </h1>

      <p class="text-white/90 text-lg mb-3">
        Select from best plans, ensuring a perfect match.
        Customize your subscription seamlessly.
      </p>

      <p class="text-yellow-200 font-semibold text-sm bg-white/10 inline-block px-4 py-2 rounded-full">
        Coins Recharge Must require for Chat / Call / Video Call with any Subscription
      </p>
    </div>

    <!-- TOP 3 PLANS -->
    <div class="grid gap-8 md:grid-cols-3">

      <!-- BASIC -->
      <div class="bg-white rounded-2xl p-8 shadow-xl flex flex-col">
        <span class="bg-red-100 text-red-700 px-4 py-1 rounded-full text-sm font-semibold mb-4 w-fit">
          Basic
        </span>

        <p class="text-gray-600 mb-6">Perfect for getting started</p>

        <h2 class="text-4xl font-bold text-gray-900">â‚¹499</h2>
        <p class="text-gray-500 mb-6">One Month</p>

        <ul class="space-y-3 text-gray-700 flex-1">
          <li>âœ“ View up to 50 profiles</li>
          <li>âœ“ Send 10 interests per day</li>
          <li>âœ“ Unlimited Chat / Call will start</li>
          <li>âœ“ Email support</li>
          <li>âœ“ Profile highlighting</li>
        </ul>

        <button onclick="subscribe('Basic',499)"
          class="mt-8 w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-pink-700 transition">
          Get started
        </button>
      </div>

      <!-- STANDARD -->
      <div class="relative bg-white rounded-2xl p-8 shadow-2xl border-2 border-pink-600 flex flex-col">

        <span class="absolute -top-4 left-1/2 -translate-x-1/2 bg-pink-600 text-white text-xs font-bold px-4 py-1 rounded-full">
          MOST POPULAR
        </span>

        <span class="bg-pink-600 text-white px-4 py-1 rounded-full text-sm font-semibold mb-4 w-fit">
          Standard
        </span>

        <p class="text-gray-600 mb-6">Best value for serious seekers</p>

        <h2 class="text-4xl font-bold text-gray-900">â‚¹999</h2>
        <p class="text-gray-500 mb-6">One Month</p>

        <ul class="space-y-3 text-gray-700 flex-1">
          <li>âœ“ View up to 100 profiles</li>
          <li>âœ“ Send 50 interests per day</li>
          <li>âœ“ 20% Discount in all Chat / Call Charges</li>
          <li>âœ“ Unlimited Video Call will Start</li>
          <li>âœ“ Priority email & phone support</li>
          <li>âœ“ Profile highlighting (3x per week)</li>
          <li>âœ“ Advanced search filters</li>
          <li>âœ“ See who viewed your profile</li>
        </ul>

        <button onclick="subscribe('standard',999)"
          class="mt-8 w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-pink-700 transition">
          Choose standard
        </button>
      </div>

      <!-- PREMIUM -->
      <div class="bg-white rounded-2xl p-8 shadow-xl flex flex-col">
        <span class="bg-yellow-100 text-yellow-700 px-4 py-1 rounded-full text-sm font-semibold mb-4 w-fit">
          Premium
        </span>

        <p class="text-gray-600 mb-6">Complete matrimonial solution</p>

        <h2 class="text-4xl font-bold text-gray-900">â‚¹1999</h2>
        <p class="text-gray-500 mb-6">One Month</p>

        <ul class="space-y-3 text-gray-700 flex-1">
          <li>âœ“ View unlimited profiles</li>
          <li>âœ“ Send unlimited interests</li>
          <li>âœ“ 30% Discount in all Chat / Video Call Charges</li>
          <li>âœ“ Featured profile placement</li>
          <li>âœ“ Unlimited chat for one month</li>
          <li>âœ“ Personalized match recommendations</li>
          <li>âœ“ Profile verification badge</li>
          <li>âœ“ Our Staff will Assist you for Matches</li>
          <li>âœ“ 24/7 priority support</li>
        </ul>

        <button onclick="subscribe('Premium',1999)"
          class="mt-8 w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-pink-700 transition">
          Choose premium
        </button>
      </div>

    </div>

    <!-- ELITE & NRI -->
    <div class="grid md:grid-cols-2 gap-10 mt-16">

      <!-- ELITE -->
      <div class="bg-white rounded-3xl shadow-2xl p-8 flex flex-col border border-pink-500">
        <h3 class="text-2xl font-bold text-pink-600 mb-4">Elite</h3>

        <h2 class="text-4xl font-bold text-gray-900">
          â‚¹3999 / â‚¹6999
        </h2>
        <p class="text-gray-500 mb-6">3 Months / 6 Months</p>

        <ul class="space-y-3 text-gray-700 flex-1">
          <li>âœ“ View unlimited profiles</li>
          <li>âœ“ Send unlimited interests</li>
          <li>âœ“ 50% Discount in all Call Charges (Voice / Video)</li>
          <li>âœ“ Featured profile placement</li>
          <li>âœ“ Unlimited chat for three / six months</li>
          <li>âœ“ Personalized match recommendations</li>
          <li>âœ“ Your A/c Manager assist You for Match</li>
          <li>âœ“ Background verification assistance</li>
          <li>âœ“ 24/7 priority support</li>
        </ul>

        <div class="flex gap-4 mt-6">
          <button onclick="subscribe('Elite-3',3999)"
            class="w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-pink-700 transition">
            Choose 3 Months
          </button>
          <button onclick="subscribe('Elite-6',6999)"
            class="w-full py-3 rounded-full bg-pink-800 text-white font-bold hover:bg-pink-900 transition">
            Choose 6 Months
          </button>
        </div>
      </div>

      <!-- NRI -->
      <div class="bg-black rounded-3xl shadow-2xl p-8 flex flex-col border border-yellow-500 text-white">
        <h3 class="text-2xl font-bold text-yellow-400 mb-4">NRI</h3>

        <h2 class="text-4xl font-bold text-yellow-400">
          â‚¹3999 / â‚¹6999
        </h2>
        <p class="text-gray-400 mb-6">3 Months / 6 Months</p>

        <ul class="space-y-3 text-gray-200 flex-1">
          <li>âœ“ View unlimited profiles</li>
          <li>âœ“ Send unlimited interests</li>
          <li>âœ“ 50% Discount in all Call Charges (Voice / Video)</li>
          <li>âœ“ Featured profile placement</li>
          <li>âœ“ Unlimited chat for three / six months</li>
          <li>âœ“ Personalized match recommendations</li>
          <li>âœ“ Your A/c Manager assist You for Match</li>
          <li>âœ“ Background verification assistance</li>
          <li>âœ“ 24/7 priority support</li>
        </ul>

        <div class="flex gap-4 mt-6">
          <button onclick="subscribe('NRI-3',3999)"
            class="w-full py-3 rounded-full bg-yellow-400 text-black font-bold hover:bg-yellow-500 transition">
            Choose 3 Months
          </button>
          <button onclick="subscribe('NRI-6',6999)"
            class="w-full py-3 rounded-full bg-yellow-600 text-black font-bold hover:bg-yellow-700 transition">
            Choose 6 Months
          </button>
        </div>
      </div>

    </div>

  </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
const isLoggedIn = <%= user ? "true" : "false" %>;

async function subscribe(plan, price) {

  if (!isLoggedIn) {
    window.location.href = "/login?redirect=/pricing";
    return;
  }

  const res = await fetch("/create-order", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ amount: price })
  });

  const { orderId } = await res.json();

  const options = {
    key: "<%= process.env.Razor_key_id %>",
    amount: price * 100,
    currency: "INR",
    name: "Shaadiwali",
    description: plan + " Plan",
    order_id: orderId,
    handler: async function (response) {

      const verifyRes = await fetch("/verify-payment", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          ...response,
          plan
        })
      });

      const result = await verifyRes.json();
      if (result.success) {
        alert("ðŸŽ‰ Subscription activated!");
        window.location.reload();
      } else {
        alert("Payment verification failed");
      }
    }
  };

  new Razorpay(options).open();
}
</script>

<%- include("layouts/footer.ejs") %>
