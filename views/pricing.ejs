
<%- layout("/layouts/navbar.ejs") %>

<!-- PAGE WRAPPER -->
<div id="page" class="min-h-screen bg-gradient-to-br from-pink-500 to-pink-800 py-16 px-4 opacity-0">

  <div class="max-w-7xl mx-auto">

    <!-- HEADER -->
    <div class="text-center mb-12 animate-fade-up">
      <h1 class="text-white text-4xl md:text-5xl font-bold mb-3">
        Choose your right plan!
      </h1>
      <p class="text-white/90 text-lg max-w-2xl mx-auto">
        Select from best plans, ensuring a perfect match.
        Need more or less? Customize your subscription seamlessly.
      </p>
    </div>


    <!-- PLANS WRAPPER -->
<div class="space-y-16">

  <!-- TOP 3 PLANS -->
  <div class="grid gap-8 md:grid-cols-3 justify-center">
          <!-- BASIC -->
          <div class="bg-white rounded-2xl p-8 shadow-xl flex flex-col animate-fade-up delay-200">
            <span class="bg-red-100 text-red-700 px-4 py-1 rounded-full text-sm font-semibold mb-4 w-fit">
              Basic
            </span>
    
            <p class="text-gray-600 mb-6">Perfect for getting started</p>
    
            <h2 class="text-4xl font-bold text-gray-900">‚Çπ9</h2>
            <p class="text-gray-500 mb-6">/week</p>
    
            <ul class="space-y-3 text-gray-700 flex-1">
              <li>‚úì View up to 50 profiles</li>
              <li>‚úì Send 10 interests per day</li>
              <li>‚úì10% discount in All call charges (video/audio)</li>
              <li>‚úì Basic profile visibility</li>
              <li>‚úì Unlimited chat one week</li>
              <li>‚úì Email support</li>
              <li class="line-through text-gray-400">Priority customer support</li>
              <li class="line-through text-gray-400">Profile highlighting</li>
              <li class="line-through text-gray-400">Advanced search filters</li>
            </ul>
    
            <button onclick="subscribe('Basic',9)"
              class="mt-8 w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-red-700 transition">
              Get started
            </button>
          </div>
    
          <!-- PREMIUM -->
          <div class="relative bg-white rounded-2xl p-8 shadow-2xl scale-105 border-2 border-red-500 flex flex-col animate-fade-up delay-300">
            <span class="absolute -top-4 left-1/2 -translate-x-1/2 bg-pink-600 text-white text-xs font-bold px-4 py-1 rounded-full">
              MOST POPULAR
            </span>
    
            <span class="bg-pink-600 text-white px-4 py-1 rounded-full text-sm font-semibold mb-4 w-fit">
              standard
            </span>
    
            <p class="text-gray-600 mb-6">Best value for serious seekers</p>
    
            <h2 class="text-4xl font-bold text-gray-900">‚Çπ999</h2>
            <p class="text-gray-500 mb-6">/week</p>
    
            <ul class="space-y-3 text-gray-700 flex-1">
              <li>‚úì View unlimited profiles</li>
              <li>‚úì Send unlimited interests</li>
              <li>‚úì Enhanced profile visibility</li>
              <li>‚úì Unlimited call one week</li>
              <li>‚úì Priority email & phone support</li>
              <li>‚úì Profile highlighting (3x per week)</li>
              <li>‚úì Advanced search filters</li>
              <li>‚úì See who viewed your profile</li>
            </ul>
    
            <button onclick="subscribe('standard',999)"
              class="mt-8 w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-red-700 transition">
              Choose standard
            </button>
          </div>
    
          <!-- ELITE -->
          <div class="bg-white rounded-2xl p-8 shadow-xl flex flex-col animate-fade-up delay-400">
            <span class="bg-red-100 text-red-700 px-4 py-1 rounded-full text-sm font-semibold mb-4 w-fit">
              Premium
            </span>
    
            <p class="text-gray-600 mb-6">Complete matrimonial solution</p>
    
            <h2 class="text-4xl font-bold text-gray-900">‚Çπ2999</h2>
            <p class="text-gray-500 mb-6">/month</p>
    
            <ul class="space-y-3 text-gray-700 flex-1">
              <li>‚úì Everything in Premium</li>
              <li>‚úì Featured profile placement</li>
              <li>‚úì unlimited call/chat for one month</li>
              <li>‚úì Personalized match recommendations</li>
              <li>‚úì Profile verification badge</li>
              <li>‚úì Background verification assistance</li>
              <li>‚úì Exclusive matchmaking events</li>
              <li>‚úì 24/7 priority support</li>
            </ul>
    
            <button onclick="subscribe('premium',2999)"
              class="mt-8 w-full py-3 rounded-full bg-pink-600 text-white font-bold hover:bg-red-700 transition">
              choose premium
            </button>
          </div>
  </div>

  <!-- ELITE & NRI (CENTERED) -->
  <div class="flex flex-col md:flex-row gap-8 justify-center items-stretch">
    <!-- ELITE -->
    <div class="bg-white rounded-3xl shadow-2xl max-w-md w-full flex flex-col overflow-hidden border border-pink-500 animate-fade-up delay-500 hover:scale-[1.02] transition">

      <!-- IMAGE HEADER -->
      <div class="relative h-40">
        <img src="/images/elite.jpg" alt="Elite Plan"
          class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gradient-to-r from-black/70 to-pink-600/40"></div>
    
        <span class="absolute top-4 left-4 bg-pink-600 text-white px-4 py-1 rounded-full text-sm font-bold">
          Elite
        </span>
      </div>
    
      <!-- CONTENT -->
      <div class="p-8 flex flex-col flex-1">
        <p class="text-gray-600 mb-4 text-sm uppercase tracking-wide">
          Premium Matchmaking
        </p>
    
        <h2 class="text-4xl font-extrabold text-gray-900">‚Çπ5999</h2>
        <p class="text-gray-500 mb-6">/ 6 Months</p>
    
        <ul class="space-y-3 text-gray-700 flex-1 text-sm">
          <li>‚úì Unlimited profile views</li>
          <li>‚úì Unlimited interests</li>
          <li>‚úì <strong>50% OFF</strong> voice & video calls</li>
          <li>‚úì Featured profile placement</li>
          <li>‚úì Unlimited chat (6 months)</li>
          <li>‚úì Personalized match suggestions</li>
          <li>‚úì Dedicated relationship manager</li>
          <li>‚úì Background verification</li>
          <li>‚úì 24/7 priority support</li>
        </ul>
    
        <button
          onclick="subscribe('Elite',5999)"
          class="mt-8 w-full py-3 rounded-full bg-gradient-to-r from-pink-600 to-red-600 text-white font-bold hover:opacity-90 transition">
          Choose Elite
        </button>
      </div>
    </div>
    <!-- NRI -->
    <div class="bg-black rounded-3xl shadow-2xl max-w-md w-full flex flex-col overflow-hidden border border-yellow-500 animate-fade-up delay-500 hover:scale-[1.02] transition">

      <!-- IMAGE HEADER -->
      <div class="relative h-40">
        <img src="/images/nri.jpeg" alt="NRI Plan"
          class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gradient-to-r from-black/80 to-yellow-600/40"></div>
    
        <span class="absolute top-4 left-4 bg-yellow-500 text-black px-4 py-1 rounded-full text-sm font-bold">
          NRI Exclusive
        </span>
      </div>
    
      <!-- CONTENT -->
      <div class="p-8 flex flex-col flex-1 text-white">
        <p class="text-gray-300 mb-4 text-sm uppercase tracking-wide">
          Global Matchmaking
        </p>
    
        <h2 class="text-4xl font-extrabold text-yellow-400">‚Çπ5999</h2>
        <p class="text-gray-400 mb-6">/ 6 Months</p>
    
        <ul class="space-y-3 text-gray-200 flex-1 text-sm">
          <li>‚úì Unlimited profile views</li>
          <li>‚úì Unlimited interests</li>
          <li>‚úì <strong>50% OFF</strong> international calls</li>
          <li>‚úì Featured global profile placement</li>
          <li>‚úì Unlimited chat (6 months)</li>
          <li>‚úì NRI-focused match recommendations</li>
          <li>‚úì Dedicated NRI relationship manager</li>
          <li>‚úì Background & document verification</li>
          <li>‚úì 24/7 global support</li>
        </ul>
    
        <button
          onclick="subscribe('NRI',5999)"
          class="mt-8 w-full py-3 rounded-full bg-gradient-to-r from-yellow-400 to-yellow-600 text-black font-bold hover:opacity-90 transition">
          Choose NRI Plan
        </button>
      </div>
    </div>
    
  </div>

</div>

    <!-- TESTIMONIALS -->
    <div class="mt-24 bg-white rounded-3xl p-12 shadow-xl animate-fade-up delay-500">
      <h2 class="text-3xl font-bold text-red-700 text-center mb-10">
        ‚ù§Ô∏è Success Stories
      </h2>

      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-red-50 p-6 rounded-xl border-l-4 border-red-500">
          <p class="italic text-gray-700 mb-4">
            "Found my soulmate within 3 months! Premium was totally worth it."
          </p>
          <p class="font-semibold text-red-700">Anjali & Rajesh</p>
          <p class="text-sm text-gray-500">Married in 2025</p>
        </div>

        <div class="bg-red-50 p-6 rounded-xl border-l-4 border-red-500">
          <p class="italic text-gray-700 mb-4">
            "premium plan gave us personal guidance. Best decision ever!"
          </p>
          <p class="font-semibold text-red-700">Simran & Advin</p>
          <p class="text-sm text-gray-500">Married in 2025</p>
        </div>

        <div class="bg-red-50 p-6 rounded-xl border-l-4 border-red-500">
          <p class="italic text-gray-700 mb-4">
            "Advanced filters helped me find someone with shared values."
          </p>
          <p class="font-semibold text-red-700">Ravi & Neha</p>
          <p class="text-sm text-gray-500">Married in 2025</p>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- ANIMATION + LOADER SCRIPT -->
<style>
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fade-up {
  animation: fadeUp 0.8s ease forwards;
}
.delay-100 { animation-delay: .1s }
.delay-200 { animation-delay: .2s }
.delay-300 { animation-delay: .3s }
.delay-400 { animation-delay: .4s }
.delay-500 { animation-delay: .5s }
</style>

<script>
  window.addEventListener("load", () => {
    document.getElementById("page").classList.remove("opacity-0");
  });

  
</script>
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
  const isLoggedIn = <%= user ? "true" : "false" %>;

  async function subscribe(plan, price) {
    // üö´ Not logged in ‚Üí redirect
    if (!isLoggedIn) {
      window.location.href = "/login?redirect=/pricing";
      return;
    }

    try {
      // 1Ô∏è‚É£ Create Razorpay order
      const res = await fetch("/create-order", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ amount: price })
      });

      if (!res.ok) throw new Error("Order creation failed");

      const { orderId } = await res.json();

      // 2Ô∏è‚É£ Open Razorpay
      const options = {
        key: "<%= process.env.Razor_key_id %>",
        amount: price * 100,
        currency: "INR",
        name: "Shaadiwali",
        description: `${plan} Plan`,
        order_id: orderId,
        handler: async function (response) {
          const verifyRes = await fetch("/verify-payment", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
      ...response,
      plan   
    })
          });

          const result = await verifyRes.json();
          if (result.success) {
            alert("üéâ Subscription activated!");
            window.location.reload();
          } else {
            alert("Payment verification failed");
          }
        },
        theme: { color: "#E11D48" }
      };

      new Razorpay(options).open();

    } catch (err) {
      console.error(err);
      alert("Payment failed. Please try again.");
    }
  }
</script>


<%- include("layouts/footer.ejs") %>
