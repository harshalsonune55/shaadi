<%- layout("/layouts/navbar.ejs") %>

<!-- Quill styles -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

<div class="bg-gray-50 min-h-screen">
  <div class="max-w-4xl mx-auto px-4 py-12">

    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">✍️ Create New Blog</h1>
      <p class="text-gray-600 mt-1">Admin panel – publish a new article</p>
    </div>

    <!-- Blog Form -->
    <form
      action="/admin/blogs"
      method="POST"
      enctype="multipart/form-data"
      class="bg-white p-6 rounded-xl shadow space-y-6"
    >

      <!-- Title -->
      <div>
        <label class="block font-medium text-gray-700 mb-1">Blog Title</label>
        <input
          type="text"
          name="title"
          required
          placeholder="Enter blog title"
          class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-300"
        />
      </div>

      <!-- Cover Image -->
      <div>
        <label class="block font-medium text-gray-700 mb-1">
          Cover Image (optional)
        </label>
        <input
          type="file"
          name="coverImage"
          accept="image/*"
          class="w-full border rounded-lg px-3 py-2 bg-white"
        />
        <p class="text-xs text-gray-500 mt-1">
          Recommended size: 1200×600 (JPG / PNG / WEBP)
        </p>
      </div>

      <!-- Content -->
      <div>
        <label class="block font-medium text-gray-700 mb-1">Content</label>

        <!-- Quill Editor -->
        <div
          id="editor"
          class="bg-white border rounded-lg min-h-[260px]"
        ></div>

        <!-- Hidden input for Quill HTML -->
        <input type="hidden" name="content" id="content">
      </div>

      <!-- Submit -->
      <div class="flex gap-4">
        <button
          type="submit"
          class="bg-pink-600 text-white px-6 py-2 rounded-lg font-semibold
                 hover:bg-pink-700 transition"
        >
          Publish Blog
        </button>

        <a
          href="/blogs"
          class="px-6 py-2 rounded-lg border text-gray-700 hover:bg-gray-100"
        >
          Cancel
        </a>
      </div>

    </form>
  </div>
</div>

<!-- Quill script -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<script>
  const quill = new Quill("#editor", {
    theme: "snow",
    placeholder: "Write your blog content here...",
    modules: {
      toolbar: [
        [{ header: [1, 2, 3, false] }],
        ["bold", "italic", "underline", "strike"],
        [{ list: "ordered" }, { list: "bullet" }],
        ["blockquote", "code-block"],
        ["link", "image"],
        ["clean"]
      ]
    }
  });

  // On submit → send HTML to backend
  document.querySelector("form").addEventListener("submit", () => {
    document.getElementById("content").value = quill.root.innerHTML;
  });
</script>
